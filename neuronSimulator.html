<!DOCTYPE HTML>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-TLPNRV5NC7"></script>
		<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-TLPNRV5NC7');
		</script>
		
		<title>Neuron Simulator</title>
		<link rel="icon" type="image/svg" href="/images/favicon.svg">
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">

							<!-- Logo -->
								<a href="index.html" class="logo">
									<span class="symbol"><img src="images/logo.svg" alt="" /></span><span class="title">Portfolio</span>
								</a>

							<!-- Nav -->
								<nav>
									<ul>
										<li><a href="#menu">Menu</a></li>
									</ul>
								</nav>

						</div>
					</header>

				<!-- Menu -->
				<nav id="menu">
					<h2>Menu</h2>
					<ul>
						<li><a href="index.html">Portfolio</a></li>
						<li><a href="contactInfo.html">Contact Info</a></li>
					</ul>
				</nav>

				<!-- Main -->
					<div id="main">
						<div class="inner">
							<h1>Neuron Simulator</h1>
							<span class="image main"><img src="images/neuronSimulator.jpg" alt="" /></span>
							<p>These neuron simulators output nerve impulses based on the type of stimulation they received. Intuitively, the eye was stimulated by light and the ear by sound. I designed all components in this including the PCB, enclosure, and firmware. The PCB is the same for both variants. </p>
							<div align="center"><h2>Functional Overview</h2></div>
							<h3>Eye Simulator</h3>
							<p>The eye has a total of seven neurons. Four neurons simulate rods and the other three simulate cones. Each cone has sensitivity to a specific color. The red cone is most sensitive in the 600nm – 675nm region. The blue cone is most sensitive in the 440nm-510nm region. The green is most sensitive in the 525nm-590nm region. A graph of the response of each cone is shown below. The response of the white color in this graph is not implemented.</p>
							<span class="image main"><img src="images/eye_response_diagram.jpg" alt="" /></span>
							<span class="image left">
								<figure>
									<img src='images/eye_rod_response.jpg' alt='missing' />
									<figcaption>Rod Response</figcaption>
								</figure>
							</span>
							<p>Every cone neuron has a threshold that activates a pulse if the firing delay period has passed. The firing delay determines the maximum frequency of impulses when the cone neuron is saturated. The ratio between the strongest cone neuron and every other cone neuron define the length of the delay period multiplied by 5.  Mathematically the delay T for every cone neuron i is expressed as the ratio of potential multiplied by 5:
							<div align="center"><code>Delay = 5*(P<sub>0</sub> / P<sub>1</sub>)T<sub>i</sub></code></div>
							For example, if two cone neurons have potentials that are above the activation threshold but one cone neuron is twice as strong as the other so that P<sub>1</sub> = 200 and P<sub>0</sub> = 400 than the delay period with respect to the first cone neuron would be: 5*(400/200)*T<sub>i</sub> = 10T<sub>i</sub>. So if both cone neurons were saturated for a period of time we would expect to see ten times more occurrences of the cone neuron with the higher potential.</p>
							<p>Variance is introduced to both amplitude and width of the neuron impulse. The mean values and variance for each neuron are shown in the table below.</p>
							<section>
								<div class="table-wrapper">
									<table class="alt">
										<thead>
											<tr>
												<th>Type/Color</th>
												<th>Mean Width</th>
												<th>Absolute Width Variance +/-200uSec</th>
												<th>Mean Absolute Amplitude (Volts)</th>
												<th>Absolute Amplitude Variance +/-5%</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>Rod/White</td>
												<td>2400 uSec</td>
												<td>400uSec</td>
												<td>1.853 V</td>
												<td>185mV</td>
											</tr>
											<tr>
												<td>Rod/White</td>
												<td>3200 uSec</td>
												<td>400uSec</td>
												<td>2.162 V</td>
												<td>216mV</td>
											</tr>
											<tr>
												<td>Rod/White</td>
												<td>3550 uSec</td>
												<td>400uSec</td>
												<td>2.780 V</td>
												<td>278mV</td>
											</tr>
											<tr>
												<td>Rod/White</td>
												<td>4250 uSec</td>
												<td>400uSec</td>
												<td>2.470 V</td>
												<td>247mV</td>
											</tr>
											<tr>
												<td>Cone/Red</td>
												<td>4700 uSec</td>
												<td>400uSec</td>
												<td>0.926 V</td>
												<td>93mV</td>
											</tr>
											<tr>
												<td>Cone/Green</td>
												<td>5400 uSec</td>
												<td>400uSec</td>
												<td>1.236 V</td>
												<td>124mV</td>
											</tr>
											<tr>
												<td>Cone/Blue</td>
												<td>6200 uSec</td>
												<td>400uSec</td>
												<td>1.544 V</td>
												<td>154mV</td>
											</tr>
										</tbody>
									</table>
								</div>
							</section>
							<h3>Ear Simulator</h3>
							<p>There are seven neurons that are each activated by different frequencies of sound. Each neuron has a different amplitude that is +/- 5% of the mean amplitude. The bands are 125Hz-250Hz, 250Hz-500Hz, 500Hz-1kHz, 1kHz-2kHz, 2kHz-4kHz, 4kHz-8kHz, and 8kHz-16kHz.</p>
							<p>Each neuron has an action potential threshold that activates a pulse if the firing delay period has passed. The firing delay determines the maximum frequency of impulses when the neuron is saturated. The ratio between the strongest neuron and every other neuron define the length of the delay period multiplied by an order of magnitude.  Mathematically the delay T for every neuron i is expressed as the ratio of potential multiplied by an order of magnitude:</p>
							<div align="center"><code>Delay = 10*(P<sub>0</sub> / P<sub>i</sub>)T<sub>i</sub></code></div>
							<p>For example, if two neurons have potentials that are above the activation threshold but one neuron is twice as strong as the other so that P1 = 200 and P0 = 400 than the delay period with respect to the first neuron would be: 10*(400/200)*Ti = 20Ti. So if both neurons were saturated for a period of time we would expect to see twenty times more occurrences of the neuron with the higher potential.</p>
							<p>The amplitude of different frequencies of sound are determined using an FFT. The length of the FFT was chosen to be small enough that there isn’t too much of a delay from when the sound is produced to when the neuron is activated. The FFT bin is 125Hz which reduces resolution in the lower band where there is only a difference of 125Hz. I've mapped the relative sensitivity of each neuron to the average point in the band according to the ISO 226:2003 Normal equal-loudness level contour at 60 phon. If the amplitude of the sound is loud enough, sub harmonics can activate other neurons at the firing frequency discussed above. I'm outputting data to the TA at 10kHz so a sample rate of 20kHz is suitable to capture the data.</p>
							<p>Variance is introduced to both amplitude and width of the neuron impulse. The mean values and variance for each neuron are shown in the table below.</p>
							<section>
								<div class="table-wrapper">
									<table class="alt">
										<thead>
											<tr>
												<th>Band</th>
												<th>Mean Width</th>
												<th>Absolute Width Variance +/-200uSec</th>
												<th>Mean Absolute Amplitude (Volts)</th>
												<th>Absolute Amplitude Variance +/-5%</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>125Hz-250Hz</td>
												<td>1150 uSec</td>
												<td>400uSec</td>
												<td>1.853 V</td>
												<td>185mV</td>
											</tr>
											<tr>
												<td>250Hz-500Hz</td>
												<td>1350 uSec</td>
												<td>400uSec</td>
												<td>2.162 V</td>
												<td>216mV</td>
											</tr>
											<tr>
												<td>500Hz-1kHz</td>
												<td>1400 uSec</td>
												<td>400uSec</td>
												<td>2.780 V</td>
												<td>278mV</td>
											</tr>
											<tr>
												<td>1kHz-2kHz</td>
												<td>1850 uSec</td>
												<td>400uSec</td>
												<td>2.470 V</td>
												<td>247mV</td>
											</tr>
											<tr>
												<td>2kHz-4kHz</td>
												<td>2300 uSec</td>
												<td>400uSec</td>
												<td>0.926 V</td>
												<td>93mV</td>
											</tr>
											<tr>
												<td>4kHz-8kHz</td>
												<td>2800 uSec</td>
												<td>400uSec</td>
												<td>1.236 V</td>
												<td>124mV</td>
											</tr>
											<tr>
												<td>8kHz-16kHz</td>
												<td>4550 uSec</td>
												<td>400uSec</td>
												<td>1.544 V</td>
												<td>154mV</td>
											</tr>
										</tbody>
									</table>
								</div>
						</section>
						<div align="center"><h2>Design Process and Challenges</h2></div>
						<p>The enclosure for these were a big unknown and would stear the layout of the PCB so I started there. I was told each unit should resemble an eye and ear so my first eye attempt in CAD was composed of a sphere with an iris and pupil. In my head it looked close enough to an eye, but nobody else was impressed. Rev 1. My modeling skills in blender were lacking so I bought a model of an ear and eye online for cheap. I modified the mesh in blender to mate with the functional part I made in CAD that contained the annular snap and PCB mounts and joined the two meshes to produce an eye and ear shaped top. </p>
						<p>The PCB was simple enough and just contained some transimpedance amps for the photodiodes and a microphone conditioning circuit. These fed into a microcontroller where I processed the signals with the integrated ADC and spit out the neuron impulses on an analog output. To generate the lookup table for the neuron impulse I just took a scan of an impulse from a textbook and traced it in Inkscape so I could just get the points. Then I exported the list of points and formatted them with excel to get even timing. I could manipulate the look of the neuron output by either multiplying the table by some scaling factor or by expanding or shrinking the time interval for outputting each point. My microcontroller had an onboard DSP so I could use the Arm CMSIS library to calculate an FFT for the ear which was surprisingly easy.</p>	
					</div>

				<!-- Footer -->
				<footer>
					<div align="center">
						<section>
							<h2>Follow</h2>
							<ul class="icons">
								<li><a href="https://github.com/scottlaboe" class="icon brands style2 fa-github"><span class="label">GitHub</span></a></li>
								<li><a href="mailto:scottyl2.718@gmail.com" class="icon solid style2 fa-envelope"><span class="label">Email</span></a></li>
							</ul>
						</section>
						<ul class="copyright">
							Design: <a href="http://html5up.net">HTML5 UP</a>
						</ul>
					</div>
				</footer>
			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>